(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{1013:function(t,e,a){},"2c6c":function(t,e,a){"use strict";a("cf3b")},"4a38":function(t,e,a){"use strict";a.r(e);var n,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"body-common",attrs:{id:"outofmanager"}},[a("div",{staticClass:"remind"},[a("h4",[t._v("外出管理")]),a("p",[t._v("该数据表为小区住户申请外出表，可自行添加外出申请")]),a("p",[t._v(" 添加一个新的外出请求， "),a("span",{staticClass:"add",on:{click:function(e){t.showAdd=!0}}},[t._v("点击这里进行添加")])])]),a("div",{staticClass:"header"},[a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{total:t.pagination.total,"page-size":t.pagination.limit,"page-sizes":[2,4,6],"current-page":t.pagination.page,"pager-count":5,layout:"prev, pager, next,jumper"},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.pagination,"page",e)},"update:current-page":function(e){return t.$set(t.pagination,"page",e)}}})],1),a("div",{staticClass:"search"},[a("label",[t._v(" Search: "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"输入您要搜索的人员的外出记录"},domProps:{value:t.search},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchList.apply(null,arguments)},input:function(e){e.target.composing||(t.search=e.target.value)}}})])])]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,"header-row-style":{backgroundColor:"#ccc"},"padding:8px":"","empty-text":t.loading?"loading...":"暂无数据"}},[a("el-table-column",{attrs:{prop:"name",label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.name||"-"))]}}])}),a("el-table-column",{attrs:{prop:"address",label:"住址"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(0==e.row.address?"A区":1==e.row.address?"B区":2==e.row.address?"C区":3==e.row.address?"D区":"-")+" ")]}}])}),a("el-table-column",{attrs:{prop:"sex",label:"电话"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.phone||"-"))]}}])}),a("el-table-column",{attrs:{prop:"result",label:"外出原因"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{title:e.row.result}},[t._v(t._s(e.row.result||"-"))])]}}])}),a("el-table-column",{attrs:{prop:"result",label:"返区时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{title:e.row.time}},[t._v(t._s(e.row.time||"-"))])]}}])}),a("el-table-column",{attrs:{prop:"control",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"iconfont icon-yunxu",attrs:{title:"允许"},on:{click:function(a){return t.canGoOut(!0,e.row._id)}}}),a("i",{staticClass:"iconfont icon-jujuechupiao",attrs:{title:"拒绝"},on:{click:function(a){return t.canGoOut(!1,e.row.id,e.row)}}})]}}])})],1),a("Add",{attrs:{show:t.showAdd},on:{"update:show":function(e){t.showAdd=e},init:t.init}}),a("Refuse",{attrs:{show:t.showRefuse,user:t.user},on:{"update:show":function(e){t.showRefuse=e},init:t.init}})],1)},i=[],o=a("ade3"),r=(a("136d"),a("973c"),a("ecdf")),u=a.n(r),l=(a("75b1"),a("ad41")),c=a.n(l),d=(a("85aa"),a("101e")),p=a.n(d),h=(a("b0c0"),a("ac1f"),a("841c"),a("881f")),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"dialog-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"bg",on:{click:function(e){return e.target!==e.currentTarget?null:t.hidden.apply(null,arguments)}}},[a("div",{staticClass:"add"},[a("div",{staticClass:"group"},[a("label",{attrs:{for:"result"}},[t._v("拒绝"+t._s(t.user.name)+"外出原因")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.result,expression:"result"}],attrs:{type:"text",id:"result"},domProps:{value:t.result},on:{input:function(e){e.target.composing||(t.result=e.target.value)}}})]),a("ep-button",{attrs:{disabled:t.disabled},nativeOn:{click:function(e){return t.addItem.apply(null,arguments)}}},[t._v("提交")])],1)])])},m=[],g=a("95c8"),w={props:{show:{type:Boolean,require:!0},user:{type:Object,require:!0}},data:function(){return{disabled:!1,result:""}},methods:{hidden:function(){this.$emit("update:show",!1),this.result=""},addItem:function(){var t=this,e={_id:this.user._id,status:2,failResult:this.result};Object(g["m"])(e).then((function(e){t.$toast(e.message),t.$emit("init"),t.hidden()}))}}},v=w,b=(a("b597"),a("2877")),_=Object(b["a"])(v,f,m,!1,null,"9f26de68",null),y=_.exports,k={name:"outofmanager",components:(n={Add:h["a"],Refuse:y},Object(o["a"])(n,p.a.name,p.a),Object(o["a"])(n,c.a.name,c.a),Object(o["a"])(n,u.a.name,u.a),n),data:function(){return{user:{},loading:!0,showAdd:!1,showRefuse:!1,search:"",searchText:"",list:[],pagination:{total:0,page:1,limit:10}}},mounted:function(){this.init()},methods:{init:function(){var t=this,e={page:this.pagination.page,limit:this.pagination.limit};this.searchText&&(e.search=this.searchText),this.loading=!0,Object(g["i"])(e).then((function(e){t.list=e.data.list,t.pagination.total=e.data.total,t.loading=!1}),(function(){t.loading=!1}))},handleCurrentChange:function(){this.list=[],this.init()},canGoOut:function(t,e,a){var n=this;!1===t?(this.user=a,this.showRefuse=!0):Object(g["m"])({_id:e,status:1}).then((function(t){n.$toast(t.message),n.init()}))},searchList:function(){this.searchText=this.search,this.list=[],this.init()}}},C=k,x=(a("2c6c"),Object(b["a"])(C,s,i,!1,null,"14a98478",null));e["default"]=x.exports},b597:function(t,e,a){"use strict";a("1013")},cf3b:function(t,e,a){}}]);
//# sourceMappingURL=20.197fdb53.js.map